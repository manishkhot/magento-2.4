!function(t,e,i,s){"use strict";var n="storeLocator";if(void 0===t.fn[n]&&"undefined"!=typeof google){var a,o,r,l,g,c,d,h,u,p,m,f,v,b,k,y,w,D,L=[],C=[],M=[],S=[],I={},x={},_={},F={},P={waypoint:!1,color:"#DC143C",fontClass:"fa fa-map-marker",maker_icon:"",s_link:"",s_address2:"",s_address:"",s_city:"",s_country:"",s_image:"",s_lat:"",s_lng:"",s_name:"",s_telephone:"",s_website:"",s_zipcode:"",s_state:"",mapID:"bh-sl-map",locationList:"bh-sl-loc-list",formContainer:"bh-sl-form-container",formID:"bh-sl-user-location",addressID:"bh-sl-address",regionID:"bh-sl-region",mapSettings:{zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},markerImg:null,markerDim:null,catMarkers:null,selectedMarkerImg:null,selectedMarkerImgDim:null,disableAlphaMarkers:!1,lengthUnit:"m",storeLimit:26,distanceAlert:60,dataType:"xml",dataLocation:"data/locations.xml",dataRaw:null,xmlElement:"marker",listColor1:"#ffffff",listColor2:"#eeeeee",originMarker:!1,originMarkerImg:null,originMarkerDim:null,bounceMarker:!0,slideMap:!0,modal:!1,overlay:"bh-sl-overlay",modalWindow:"bh-sl-modal-window",modalContent:"bh-sl-modal-content",closeIcon:"bh-sl-close-icon",defaultLoc:!1,defaultLat:null,defaultLng:null,autoComplete:!1,autoCompleteOptions:{},autoGeocode:!1,geocodeID:null,maxDistance:!1,maxDistanceID:"bh-sl-maxdistance",fullMapStart:!1,fullMapStartBlank:!1,fullMapStartListLimit:!1,noForm:!1,loading:!1,loadingContainer:"bh-sl-loading",featuredLocations:!1,pagination:!1,locationsPerPage:10,inlineDirections:!1,nameSearch:!1,searchID:"bh-sl-search",nameAttribute:"name",visibleMarkersList:!1,dragSearch:!1,infowindowTemplatePath:"js/plugins/storeLocator/templates/infowindow-description.html",listTemplatePath:"js/plugins/storeLocator/templates/location-list-description.html",KMLinfowindowTemplatePath:"js/plugins/storeLocator/templates/kml-infowindow-description.html",KMLlistTemplatePath:"js/plugins/storeLocator/templates/kml-location-list-description.html",listTemplateID:null,infowindowTemplateID:null,taxonomyFilters:null,taxonomyFiltersContainer:"bh-sl-filters-container",exclusiveFiltering:!1,querystringParams:!1,debug:!1,sessionStorage:!1,markerCluster:null,infoBubble:null,callbackNotify:null,callbackBeforeSend:null,callbackSuccess:null,callbackModalOpen:null,callbackModalReady:null,callbackModalClose:null,callbackJsonp:null,callbackCreateMarker:null,callbackPageChange:null,callbackDirectionsRequest:null,callbackCloseDirections:null,callbackNoResults:null,callbackListClick:null,callbackMarkerClick:null,callbackFilters:null,callbackMapSet:null,addressErrorAlert:"Unable to find address",autoGeocodeErrorAlert:"Automatic location detection failed. Please fill in your address or zip code.",distanceErrorAlert:"Unfortunately, our closest location is more than ",mileLang:"mile",milesLang:"miles",kilometerLang:"kilometer",kilometersLang:"kilometers",noResultsTitle:"No results",noResultsDesc:"No locations were found with the given criteria. Please modify your selections or input.",nextPage:"Next &raquo;",prevPage:"&laquo; Prev"};t.extend(R.prototype,{init:function(){var e=this;if(this.writeDebug("init"),!1===this.settings.waypoint){if("km"===this.settings.lengthUnit?_.EarthRadius=6367:_.EarthRadius=3956,l="kml"===this.settings.dataType?"xml":this.settings.dataType,!0===this.settings.inlineDirections&&t("."+this.settings.locationList).prepend('<div class="bh-sl-directions-panel"></div>'),d=this.settings.mapSettings.zoom,null!==this.settings.taxonomyFilters&&this.taxonomyFiltering(),!0===this.settings.modal&&(null!==this.settings.taxonomyFilters&&t("."+this.settings.taxonomyFiltersContainer).clone(!0,!0).prependTo(a),a.wrap('<div class="'+this.settings.overlay+'"><div class="'+this.settings.modalWindow+'"><div class="'+this.settings.modalContent+'">'),t("."+this.settings.modalWindow).prepend('<div class="'+this.settings.closeIcon+'"></div>'),t("."+this.settings.overlay).hide()),!0===this.settings.autoComplete){var s=i.getElementById(this.settings.addressID),n=new google.maps.places.Autocomplete(s,this.settings.autoCompleteOptions);!0===this.settings.autoComplete&&n.addListener("place_changed",function(t){e.processForm(t)})}this._loadTemplates()}else this._loadInfoTemplate(),e._waypoint()},_labelMarker:function(t,e,i){var s=this,n=new google.maps.LatLng(e,i),a=s.settings.color,o=s.settings.fontClass,r=s.settings.maker_icon,l="";l=r&&(r.indexOf("http://")>=0||r.indexOf("https://")>=0)?"<span><img src='"+r+"' class='maker-icon-class' alt='maker icon'/></span>":"<span><i style='color:"+a+";' class='fa "+o+"'></i><span>";var g={path:"M 50 -119.876 -50 -119.876 -50 -19.876 -13.232 -19.876 0.199 0 13.63 -19.876 50 -19.876 Z",fillColor:a,fillOpacity:1,scale:.3,strokeColor:a,strokeWeight:0},c=new MarkerWithLabel({position:n,draggable:!1,raiseOnDrag:!1,map:t,animation:null,labelContent:l,labelAnchor:new google.maps.Point(10,31),labelClass:"map-labels",labelStyle:{opacity:1},icon:g});S.push(c);var d=new google.maps.InfoWindow;s._createSingleInfowindow(c,d)},_setMapOnAll:function(t){for(var e=0;e<S.length;e++)S[e].setMap(t)},_loadInfoTemplate:function(){},_defineLocationDataSingle:function(e){this.writeDebug("_defineLocationDataSingle",arguments);var i={href:this.settings.s_link,name:this.settings.s_name,lat:this.settings.s_lat,lng:this.settings.s_lng,image:this.settings.s_image,address:this.settings.s_address,address2:this.settings.s_address2,city:this.settings.s_city,country:this.settings.s_country,zipcode:this.settings.s_zipcode,state:this.settings.s_state,telephone:this.settings.s_telephone,website:this.settings.s_website};return{location:[t.extend(i,{markerid:"1",marker:"1"})]}},_createSingleInfowindow:function(e,i){this.writeDebug("_createSingleInfowindow",arguments);var s=this,n=this._defineLocationDataSingle(),a="";t.map(n.location,function(t){a+=s.replaceStr('<div class="store-content"><div class="tag-store"><img src="{{image}}" style="height:128px;width:128px"></div><div class="tag-content"><div class="loc-name"><a href="{{href}}" target="_blank">{{name}}</a></div><div>{{address}}</div><div>{{address2}}</div><div>{{city}}, {{state}} {{country}} {{zipcode}}</div><div>{{telephone}}</div><div><a href="{{website}}" target="_blank">{{website}}</a></div></div></div>',t)}),google.maps.event.addListener(e,"click",function(){i.setContent(a),i.open(e.get("map"),e),e.get("map").panTo(e.getPosition()),e.get("map").setZoom(15)})},_geocodeLatLng:function(i,s){var n={lat:i,lng:s};(new google.maps.Geocoder).geocode({location:n},function(i,s){"OK"===s?i[1]?t("#destination-input").val().length<=0&&t("#destination-input").val(i[1].formatted_address):e.alert("No results found"):e.alert("Geocoder failed due to: "+s)})},_geocodeAdress:function(i){geocoder.geocode({address:i},function(i,s){"OK"===s?i[1]?t("#destination-input").val().length<=0&&t("#destination-input").val(i[0].geometry.location):e.alert("No results found"):e.alert("Geocoder failed due to: "+s)})},_waypoint:function(){var e=this;e._geocodeLatLng(e.settings.defaultLat,e.settings.defaultLng);var s={lat:e.settings.defaultLat,lng:e.settings.defaultLng},n=new google.maps.DirectionsRenderer,a=new google.maps.DirectionsService,o=new google.maps.Map(i.getElementById("bh-sl-map"),{zoom:14,center:s});n.setMap(o),e._labelMarker(o,e.settings.defaultLat,e.settings.defaultLng),t("#destination-input").attr("readonly",!0),t("#destination-input").css("cursor","not-allowed"),t("#get_direction").on("click",function(){e._route(a,n)}),t(".swap-locations").on("click",function(){if(new google.maps.LatLng(e.settings.defaultLat,e.settings.defaultLng),t(this).hasClass("swap")){t(this).removeClass("swap"),t(this).addClass("unswap"),t("#destination-input").attr("readonly",!0),t("#destination-input").css("cursor","not-allowed"),t("#origin-input").attr("readonly",!1),t("#origin-input").css("cursor","pointer");var i=t("#destination-input").val(),s=t("#origin-input").val();t("#origin-input").val(i),t("#destination-input").val(s),e._route(a,n)}else{t(this).removeClass("unswap"),t(this).addClass("swap"),t("#origin-input").attr("readonly",!0),t("#origin-input").css("cursor","not-allowed"),t("#destination-input").attr("readonly",!1),t("#destination-input").css("cursor","pointer");i=t("#destination-input").val(),s=t("#origin-input").val();t("#origin-input").val(i),t("#destination-input").val(s),e._route(a,n)}});var r="ul#mode li";t(r).on("click",function(){t(r).removeClass("active"),t(this).addClass("active"),e._route(a,n)});var l=i.getElementById("origin-input"),g=i.getElementById("destination-input"),c=new google.maps.places.Autocomplete(l);c.bindTo("bounds",o);var d=new google.maps.places.Autocomplete(g);d.bindTo("bounds",o),c.addListener("place_changed",function(){var t=c.getPlace();t.geometry&&(e._expand(o,t),new google.maps.LatLng(t.geometry.location.lat(),t.geometry.location.lng()),e._route(a,n))}),d.addListener("place_changed",function(){var t=d.getPlace();t.geometry&&(e._expand(o,t),new google.maps.LatLng(t.geometry.location.lat(),t.geometry.location.lng()),e._route(a,n))}),n.setPanel(i.getElementById("displaying-direction"))},_expand:function(t,e){e.geometry.viewport?t.fitBounds(e.geometry.viewport):(t.setCenter(e.geometry.location),t.setZoom(17))},_route:function(e,i){this.writeDebug("calculateAndDisplayRoute");this._setMapOnAll(null);var s=t("ul#mode").find("li.active").data("traveling"),n=t("#origin-input").val(),a=t("#destination-input").val();n&&a&&e.route({origin:n,destination:a,travelMode:google.maps.TravelMode[s]},function(t,e){"OK"==e&&i.setDirections(t)})},destroy:function(){this.writeDebug("destroy"),this.reset();var e=t("#"+this.settings.mapID);if(S.length)for(var s=0;s<=S.length;s++)google.maps.event.removeListener(S[s]);t("."+this.settings.locationList+" ul").empty(),e.hasClass("bh-sl-map-open")&&e.empty().removeClass("bh-sl-map-open"),!0===this.settings.modal&&t(". "+this.settings.overlay).remove(),e.attr("style",""),a.hide(),t.removeData(a.get(0)),t(i).off(n),a.unbind()},reset:function(){if(this.writeDebug("reset"),C=[],L=[],M=[],S=[],D=!1,t(i).off("click."+n,"."+this.settings.locationList+" li"),t("."+this.settings.locationList+" .bh-sl-close-directions-container").length&&t(".bh-sl-close-directions-container").remove(),!0===this.settings.inlineDirections){var e=t("."+this.settings.locationList+" .adp");e.length>0&&(e.remove(),t("."+this.settings.locationList+" ul").fadeIn()),t(i).off("click","."+this.settings.locationList+" li .loc-directions a")}!0===this.settings.pagination&&t(i).off("click."+n,".bh-sl-pagination li")},formFiltersReset:function(){if(this.writeDebug("formFiltersReset"),null!==this.settings.taxonomyFilters){var e=t("."+this.settings.taxonomyFiltersContainer+" input"),i=t("."+this.settings.taxonomyFiltersContainer+" select");"object"==typeof e&&(e.each(function(){(t(this).is('input[type="checkbox"]')||t(this).is('input[type="radio"]'))&&t(this).prop("checked",!1)}),i.each(function(){t(this).prop("selectedIndex",0)}))}},mapReload:function(){this.writeDebug("mapReload"),this.reset();var e=t("#"+this.settings.addressID),i=t("#"+this.settings.searchID);(!0===this.settings.nameSearch&&""!==i.val()||""!==e.val())&&(i.val(""),e.val(""),this.processForm()),null!==this.settings.taxonomyFilters&&(this.formFiltersReset(),this.taxonomyFiltersInit()),m&&f?(this.settings.mapSettings.zoom=d,this.processForm()):this.mapping(F)},notify:function(t){this.writeDebug("notify",t),this.settings.callbackNotify&&this.settings.callbackNotify.call(this,t)},geoCodeCalcToRadian:function(t){return this.writeDebug("geoCodeCalcToRadian",t),t*(Math.PI/180)},geoCodeCalcDiffRadian:function(t,e){return this.writeDebug("geoCodeCalcDiffRadian",arguments),this.geoCodeCalcToRadian(e)-this.geoCodeCalcToRadian(t)},geoCodeCalcCalcDistance:function(t,e,i,s,n){return this.writeDebug("geoCodeCalcCalcDistance",arguments),2*n*Math.asin(Math.min(1,Math.sqrt(Math.pow(Math.sin(this.geoCodeCalcDiffRadian(t,i)/2),2)+Math.cos(this.geoCodeCalcToRadian(t))*Math.cos(this.geoCodeCalcToRadian(i))*Math.pow(Math.sin(this.geoCodeCalcDiffRadian(e,s)/2),2))))},getQueryString:function(t){if(this.writeDebug("getQueryString",t),t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}},_loadTemplates:function(){this.writeDebug("_loadTemplates");var e=this,i='<div class="bh-sl-error">Error: Could not load plugin templates. Check the paths and ensure they have been uploaded. Paths will be wrong if you do not run this from a web server.</div>';"kml"===this.settings.dataType&&null===this.settings.listTemplateID&&null===this.settings.infowindowTemplateID?t.when(t.get(this.settings.KMLinfowindowTemplatePath,function(t){r=t}),t.get(this.settings.KMLlistTemplatePath,function(t){o=t})).then(function(){e.locator()},function(){throw t("."+e.settings.formContainer).append(i),new Error("Could not load storeLocator plugin templates")}):null!==this.settings.listTemplateID&&null!==this.settings.infowindowTemplateID?(r=t("#"+this.settings.infowindowTemplateID).html(),o=t("#"+this.settings.listTemplateID).html(),e.locator()):t.when(t.get(this.settings.infowindowTemplatePath,function(t){r=t}),t.get(this.settings.listTemplatePath,function(t){o=t})).then(function(){e.locator()},function(){throw t("."+e.settings.formContainer).append(i),new Error("Could not load storeLocator plugin templates")})},locator:function(){this.writeDebug("locator"),!0===this.settings.slideMap&&a.hide(),this._start(),this._formEventHandler()},_formEventHandler:function(){this.writeDebug("_formEventHandler");var e=this;!0===this.settings.noForm?(t(i).on("click."+n,"."+this.settings.formContainer+" button",function(t){e.processForm(t)}),t(i).on("keydown."+n,function(i){13===i.keyCode&&t("#"+e.settings.addressID).is(":focus")&&e.processForm(i)})):t(i).on("submit."+n,"#"+this.settings.formID,function(t){e.processForm(t)}),t(".bh-sl-reset").length&&t("#"+this.settings.mapID).length&&t(i).on("click."+n,".bh-sl-reset",function(){e.mapReload()})},_getData:function(e,i,s,n){this.writeDebug("_getData",arguments);var a=this,o="",r="",g="";if(void 0!==n&&void 0!==n.geometry.bounds&&(g=n.formatted_address,o=JSON.stringify(n.geometry.bounds.getNorthEast()),r=JSON.stringify(n.geometry.bounds.getSouthWest())),this.settings.callbackBeforeSend&&this.settings.callbackBeforeSend.call(this,e,i,s,g,o,r),null===a.settings.dataRaw){var c=t.Deferred();return!0===this.settings.loading&&t("."+this.settings.formContainer).append('<div class="'+this.settings.loadingContainer+'"></div>'),t.ajax({type:"GET",url:this.settings.dataLocation+("jsonp"===this.settings.dataType?(this.settings.dataLocation.match(/\?/)?"&":"?")+"callback=?":""),data:{name:"",origLat:e,origLng:i,origAddress:s,formattedAddress:g,boundsNorthEast:o,boundsSouthWest:r},dataType:l,jsonpCallback:"jsonp"===this.settings.dataType?this.settings.callbackJsonp:null}).done(function(e){c.resolve(e),!0===a.settings.loading&&t("."+a.settings.formContainer+" ."+a.settings.loadingContainer).remove()}).fail(c.reject),c.promise()}return"xml"===l?t.parseXML(a.settings.dataRaw):"json"===l?Array.isArray&&Array.isArray(a.settings.dataRaw)?a.settings.dataRaw:"string"==typeof a.settings.dataRaw?t.parseJSON(a.settings.dataRaw):[]:void 0},_start:function(){this.writeDebug("_start");var s,a=this,o=this.settings.autoGeocode;if(!1!==a.settings.fullMapStartBlank){t("#"+a.settings.mapID).addClass("bh-sl-map-open");var r=a.settings.mapSettings;r.zoom=a.settings.fullMapStartBlank,s=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng),r.center=s;var l=new google.maps.Map(i.getElementById(a.settings.mapID),r);google.maps.event.addDomListener(e,"resize",function(){var t=l.getCenter();google.maps.event.trigger(l,"resize"),l.setCenter(t)}),a.settings.fullMapStartBlank=!1,r.zoom=d}else!0===this.settings.defaultLoc&&this.defaultLocation(),""!==t.trim(t("#"+this.settings.addressID).val())?(a.writeDebug("Using Address Field"),a.processForm(null),o=!1):!0===this.settings.fullMapStart&&(!0===this.settings.querystringParams&&this.getQueryString(this.settings.addressID)||!0===this.settings.querystringParams&&this.getQueryString(this.settings.searchID)||!0===this.settings.querystringParams&&this.getQueryString(this.settings.maxDistanceID)?(a.writeDebug("Using Query String"),this.processForm(null),o=!1):this.mapping(null)),!0===this.settings.autoGeocode&&!0===o&&(a.writeDebug("Auto Geo"),a.htmlGeocode()),null!==this.settings.autoGeocode&&(a.writeDebug("Button Geo"),t(i).on("click."+n,"#"+this.settings.geocodeID,function(){a.htmlGeocode()}))},htmlGeocode:function(){this.writeDebug("htmlGeocode",arguments);var t=this;if(!0===this.settings.sessionStorage&&e.sessionStorage&&e.sessionStorage.getItem("myGeo"))return this.writeDebug("Using Session Saved Values for GEO"),this.autoGeocodeQuery(JSON.parse(e.sessionStorage.getItem("myGeo"))),!1;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(i){t.writeDebug("Current Position Result");var s={coords:{latitude:i.coords.latitude,longitude:i.coords.longitude,accuracy:i.coords.accuracy}};!0===t.settings.sessionStorage&&e.sessionStorage&&e.sessionStorage.setItem("myGeo",JSON.stringify(s)),t.autoGeocodeQuery(s)},function(e){t._autoGeocodeError(e)})},googleGeocode:function(t){t.writeDebug("googleGeocode",arguments);var e=new google.maps.Geocoder;this.geocode=function(t,i){e.geocode(t,function(t,e){if(e!==google.maps.GeocoderStatus.OK)throw i(null),new Error("Geocode was not successful for the following reason: "+e);var s={};s.latitude=t[0].geometry.location.lat(),s.longitude=t[0].geometry.location.lng(),s.geocodeResult=t[0],i(s)})}},reverseGoogleGeocode:function(t){t.writeDebug("reverseGoogleGeocode",arguments);var e=new google.maps.Geocoder;this.geocode=function(t,i){e.geocode(t,function(t,e){if(e===google.maps.GeocoderStatus.OK){if(t[0]){var s={};s.address=t[0].formatted_address,i(s)}}else i(null)})}},roundNumber:function(t,e){return this.writeDebug("roundNumber",arguments),Math.round(t*Math.pow(10,e))/Math.pow(10,e)},isEmptyObject:function(t){this.writeDebug("isEmptyObject",arguments);for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},hasEmptyObjectVals:function(t){this.writeDebug("hasEmptyObjectVals",arguments);var e=!0;for(var i in t)t.hasOwnProperty(i)&&""!==t[i]&&0!==t[i].length&&(e=!1);return e},modalClose:function(){this.writeDebug("modalClose"),this.settings.callbackModalClose&&this.settings.callbackModalClose.call(this),I={},t("."+this.settings.overlay+" select").prop("selectedIndex",0),t("."+this.settings.overlay+" input").prop("checked",!1),t("."+this.settings.overlay).hide()},_createLocationVariables:function(t){var e;this.writeDebug("_createLocationVariables",arguments),x={};for(var i in C[t])C[t].hasOwnProperty(i)&&(e=C[t][i],"distance"===i&&(e=this.roundNumber(e,2)),x[i]=e)},sortNumerically:function(t){this.writeDebug("sortNumerically",arguments),t.sort(function(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0})},filterData:function(t,e){this.writeDebug("filterData",arguments);var i=!0;for(var s in e)if(e.hasOwnProperty(s))if(!0===this.settings.exclusiveFiltering){for(var n=e[s],a=[],o=0;o<n.length;o++)a[o]=new RegExp(n[o],"i").test(t[s].replace(/[^\x00-\x7F]/g,""));-1===a.indexOf(!0)&&(i=!1)}else void 0!==t[s]&&new RegExp(e[s].join(""),"i").test(t[s].replace(/[^\x00-\x7F]/g,""))||(i=!1);if(i)return!0},_paginationOutput:function(t,e){this.writeDebug("_paginationOutput",arguments);var i="",s=(t=parseFloat(t))+1;t>0&&(i+='<li class="bh-sl-next-prev" data-page="'+(t-1)+'">'+this.settings.prevPage+"</li>");for(var n=0;n<Math.ceil(e);n++){var a=n+1;i+=n===t?'<li class="bh-sl-current" data-page="'+n+'">'+a+"</li>":'<li data-page="'+n+'">'+a+"</li>"}return s<e&&(i+='<li class="bh-sl-next-prev" data-page="'+s+'">'+this.settings.nextPage+"</li>"),i},paginationSetup:function(e){this.writeDebug("paginationSetup",arguments);var i,s="",n=t(".bh-sl-pagination-container .bh-sl-pagination");i=-1===this.settings.storeLimit||C.length<this.settings.storeLimit?C.length/this.settings.locationsPerPage:this.settings.storeLimit/this.settings.locationsPerPage,void 0===e&&(e=0),0===n.length?s=this._paginationOutput(e,i):(n.empty(),s=this._paginationOutput(e,i)),n.append(s)},markerImage:function(t,e,i){return this.writeDebug("markerImage",arguments),void 0!==e&&void 0!==i?{url:t,size:new google.maps.Size(e,i),scaledSize:new google.maps.Size(e,i)}:{url:t,size:new google.maps.Size(32,32),scaledSize:new google.maps.Size(32,32)}},createMarker:function(t,e,i,s,n,a,o,r,l){var g,c;this.writeDebug("createMarker",arguments);var d=[];if(null!==this.settings.catMarkers&&void 0!==a)if(-1!==a.indexOf(",")){d=a.split(",");for(var h=0;h<d.length;h++)d[h]in this.settings.catMarkers&&this.markerImage(this.settings.catMarkers[d[h]][0],parseInt(this.settings.catMarkers[d[h]][1]),parseInt(this.settings.catMarkers[d[h]][2]))}else a in this.settings.catMarkers&&this.markerImage(this.settings.catMarkers[a][0],parseInt(this.settings.catMarkers[a][1]),parseInt(this.settings.catMarkers[a][2]));if(null!==this.settings.markerImg&&(null===this.settings.markerDim?this.markerImage(this.settings.markerImg):this.markerImage(this.settings.markerImg,this.settings.markerDim.width,this.settings.markerDim.height)),this.settings.callbackCreateMarker)g=this.settings.callbackCreateMarker.call(this,n,t,s,a);else if(!0===this.settings.disableAlphaMarkers||-1===this.settings.storeLimit||this.settings.storeLimit>26||null!==this.settings.catMarkers||null!==this.settings.markerImg||!0===this.settings.fullMapStart&&!0===D&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||-1===this.settings.fullMapStartListLimit)){void 0!==o&&"null"!==o||(o="#F59236"),void 0!==r&&"null"!==o||(r="fa-map-marker");var u="";u=l&&(l.indexOf("http://")>=0||l.indexOf("https://")>=0)?"<span><img src='"+l+"' class='maker-icon-class' alt='maker icon'/></span>":"<span><i style='color:"+o+";' class='fa "+r+"'></i><span>";var p={path:"M 50 -119.876 -50 -119.876 -50 -19.876 -13.232 -19.876 0.199 0 13.63 -19.876 50 -19.876 Z",fillColor:o,fillOpacity:1,scale:.3,strokeColor:o,strokeWeight:0};g=new MarkerWithLabel({position:t,draggable:!1,raiseOnDrag:!1,map:n,animation:null,labelContent:u,labelAnchor:new google.maps.Point(10,31),labelClass:"map-labels",labelStyle:{opacity:1},icon:p})}else c={url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-b.png&text="+s+"&psize=16&font=fonts/Roboto-Regular.ttf&color=ff333333&ax=44&ay=48"},g=new google.maps.Marker({position:t,map:n,icon:c,draggable:!1});return g},_defineLocationData:function(e,i,s){this.writeDebug("_defineLocationData",arguments);var n,a="";this._createLocationVariables(e.get("id")),n=x.distance<=1?"km"===this.settings.lengthUnit?this.settings.kilometerLang:this.settings.mileLang:"km"===this.settings.lengthUnit?this.settings.kilometersLang:this.settings.milesLang;var o=e.get("id");return a=!0===this.settings.disableAlphaMarkers||-1===this.settings.storeLimit||this.settings.storeLimit>26||!0===this.settings.fullMapStart&&!0===D&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||-1===this.settings.fullMapStartListLimit)?o+1:s>0?String.fromCharCode("A".charCodeAt(0)+(i+o)):String.fromCharCode("A".charCodeAt(0)+o),{location:[t.extend(x,{markerid:o,marker:a,length:n,origin:g})]}},listSetup:function(e,i,s){var n=this;this.writeDebug("listSetup",arguments);var a=this._defineLocationData(e,i,s),r="";t.map(a.location,function(t){r+=n.replaceStr(o,t)}),t("."+this.settings.locationList+" ul").append(r)},replaceStr:function(t,e){for(var i=[e.marker,e.markerid,e.name,e.link,e.image,e.telephone,e.email,e.website,e.city,e.zipcode,e.address,e.address2,e.country,e.linkedin,e.facebook,e.twitter,e.youtube,e.vimeo,e.href,e.distance,e.length,e.lat,e.lng,e.state],s=["{{marker}}","{{markerid}}","{{name}}","{{link}}","{{image}}","{{telephone}}","{{email}}","{{website}}","{{city}}","{{zipcode}}","{{address}}","{{address2}}","{{country}}","{{linkedin}}","{{facebook}}","{{twitter}}","{{youtube}}","{{vimeo}}","{{href}}","{{distance}}","{{length}}","{{lat}}","{{lng}}","{{state}}"],n=0;n<s.length;n++)t=t.replace(new RegExp(s[n],"gi"),i[n]);return t},changeSelectedMarker:function(t){var e;void 0!==w&&w.setIcon(y),e=null===this.settings.selectedMarkerImgDim?this.markerImage(this.settings.selectedMarkerImg):this.markerImage(this.settings.selectedMarkerImg,this.settings.selectedMarkerImgDim.width,this.settings.selectedMarkerImgDim.height),y=t.icon,t.setIcon(e),w=t},createInfowindow:function(e,i,s,n,a){this.writeDebug("createInfowindow",arguments);var o=this,l=this._defineLocationData(e,n,a),g="";t.map(l.location,function(t){g+=o.replaceStr(r,t)}),"left"===i?(s.setContent(g),s.open(e.get("map"),e)):google.maps.event.addListener(e,"click",function(){s.setContent(g),s.open(e.get("map"),e),e.get("map").panTo(e.getPosition()),e.get("map").setZoom(15);var i=e.get("id"),n=t("."+o.settings.locationList+" li[data-markerid="+i+"]");if(n.length>0){o.settings.callbackMarkerClick&&o.settings.callbackMarkerClick.call(this,e,i,n),t("."+o.settings.locationList+" li").removeClass("list-focus"),n.addClass("list-focus");var a=t("."+o.settings.locationList);a.animate({scrollTop:n.offset().top-a.offset().top+a.scrollTop()})}null!==o.settings.selectedMarkerImg&&o.changeSelectedMarker(e)})},autoGeocodeQuery:function(e){this.writeDebug("autoGeocodeQuery",arguments);var i,s=this,n=null,a=t("#"+this.settings.maxDistanceID);!0===this.settings.querystringParams&&this.getQueryString(this.settings.maxDistanceID)?(n=this.getQueryString(this.settings.maxDistanceID),""!==a.val()&&(n=a.val())):!0===this.settings.maxDistance&&(n=a.val()||"");var o=new this.reverseGoogleGeocode(this),r=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);o.geocode({latLng:r},function(t){null!==t?(i=p=t.address,m=F.lat=e.coords.latitude,f=F.lng=e.coords.longitude,F.origin=i,F.distance=n,s.mapping(F)):s.notify(s.settings.addressErrorAlert)})},_autoGeocodeError:function(){this.writeDebug("_autoGeocodeError"),this.notify(this.settings.autoGeocodeErrorAlert)},defaultLocation:function(){this.writeDebug("defaultLocation");var e,i=this,s=null,n=t("#"+this.settings.maxDistanceID);!0===this.settings.querystringParams&&this.getQueryString(this.settings.maxDistanceID)?(s=this.getQueryString(this.settings.maxDistanceID),""!==n.val()&&(s=n.val())):!0===this.settings.maxDistance&&(s=n.val()||"");var a=new this.reverseGoogleGeocode(this),o=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);a.geocode({latLng:o},function(t){null!==t?(e=p=t.address,m=F.lat=i.settings.defaultLat,f=F.lng=i.settings.defaultLng,F.distance=s,F.origin=e,i.mapping(F)):i.notify(i.settings.addressErrorAlert)})},paginationChange:function(t){this.writeDebug("paginationChange",arguments),this.settings.callbackPageChange&&this.settings.callbackPageChange.call(this,t),F.page=t,this.mapping(F)},getAddressByMarker:function(t){this.writeDebug("getAddressByMarker",arguments);var e="";return C[t].address&&(e+=C[t].address+" "),C[t].address2&&(e+=C[t].address2+" "),C[t].city&&(e+=C[t].city+", "),C[t].state&&(e+=C[t].state+" "),C[t].postal&&(e+=C[t].postal+" "),C[t].country&&(e+=C[t].country+" "),e},clearMarkers:function(){this.writeDebug("clearMarkers");var t=null;t=C.length<this.settings.storeLimit?C.length:this.settings.storeLimit;for(var e=0;e<t;e++)S[e].setMap(null)},directionsRequest:function(e,s,n){this.writeDebug("directionsRequest",arguments),this.settings.callbackDirectionsRequest&&this.settings.callbackDirectionsRequest.call(this,e,s,n);var a=this.getAddressByMarker(s);if(a){t("."+this.settings.locationList+" ul").hide(),this.clearMarkers(),null!==b&&void 0!==b&&(b.setMap(null),b=null),b=new google.maps.DirectionsRenderer,k=new google.maps.DirectionsService,b.setMap(n),b.setPanel(t(".bh-sl-directions-panel").get(0));var o={origin:e,destination:a,travelMode:google.maps.TravelMode.DRIVING};k.route(o,function(t,e){e===google.maps.DirectionsStatus.OK&&b.setDirections(t)}),t("."+this.settings.locationList).prepend('<div class="bh-sl-close-directions-container"><div class="'+this.settings.closeIcon+'"></div></div>')}t(i).off("click","."+this.settings.locationList+" li .loc-directions a")},closeDirections:function(){this.writeDebug("closeDirections"),this.settings.callbackCloseDirections&&this.settings.callbackCloseDirections.call(this),this.reset(),m&&f&&(0===this.countFilters()?this.settings.mapSettings.zoom=d:this.settings.mapSettings.zoom=0,this.processForm(null)),t(i).off("click."+n,"."+this.settings.locationList+" .bh-sl-close-icon")},processForm:function(e){this.writeDebug("processForm",arguments);var i=this,s=null,n=t("#"+this.settings.addressID),a=t("#"+this.settings.searchID),o=t("#"+this.settings.maxDistanceID);void 0!==e&&null!==e&&e.preventDefault(),!0===this.settings.querystringParams&&(this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID)||this.getQueryString(this.settings.maxDistanceID))?(p=this.getQueryString(this.settings.addressID),u=this.getQueryString(this.settings.searchID),s=this.getQueryString(this.settings.maxDistanceID),""!==n.val()&&(p=n.val()),""!==a.val()&&(u=a.val()),""!==o.val()&&(s=o.val())):(p=n.val()||"",u=a.val()||"",!0===this.settings.maxDistance&&(s=o.val()||""));var r=t("#"+this.settings.regionID).val();if(""===p&&""===u)this._start();else if(""!==p){if(void 0!==g&&void 0!==m&&void 0!==f&&p===g)F.lat=m,F.lng=f,F.origin=p,F.name=u,F.distance=s,i.mapping(F);else new this.googleGeocode(this).geocode({address:p,region:r},function(t){null!==t?(m=t.latitude,f=t.longitude,F.lat=m,F.lng=f,F.origin=p,F.name=u,F.distance=s,F.geocodeResult=t.geocodeResult,i.mapping(F)):i.notify(i.settings.addressErrorAlert)})}else""!==u&&(F.name=u,i.mapping(F))},locationsSetup:function(t,e,i,s,n){if(this.writeDebug("locationsSetup",arguments),void 0!==s&&(t.distance||(t.distance=this.geoCodeCalcCalcDistance(e,i,t.lat,t.lng,_.EarthRadius))),!0===this.settings.maxDistance&&void 0!==n&&null!==n){if(!(t.distance<=n))return;C.push(t)}else if(!0===this.settings.maxDistance&&!0===this.settings.querystringParams&&void 0!==n&&null!==n){if(!(t.distance<=n))return;C.push(t)}else C.push(t)},countFilters:function(){this.writeDebug("countFilters");var t=0;if(!this.isEmptyObject(I))for(var e in I)I.hasOwnProperty(e)&&(t+=I[e].length);return t},_existingCheckedFilters:function(e){this.writeDebug("_existingCheckedFilters",arguments),t("#"+this.settings.taxonomyFilters[e]+" input[type=checkbox]").each(function(){if(t(this).prop("checked")){var i=t(this).val();void 0!==i&&""!==i&&-1===I[e].indexOf(i)&&I[e].push(i)}})},_existingSelectedFilters:function(e){this.writeDebug("_existingSelectedFilters",arguments),t("#"+this.settings.taxonomyFilters[e]+" select").each(function(){var i=t(this).val();void 0!==i&&""!==i&&-1===I[e].indexOf(i)&&(I[e]=[i])})},_existingRadioFilters:function(e){this.writeDebug("_existingRadioFilters",arguments),t("#"+this.settings.taxonomyFilters[e]+" input[type=radio]").each(function(){if(t(this).prop("checked")){var i=t(this).val();void 0!==i&&""!==i&&-1===I[e].indexOf(i)&&(I[e]=[i])}})},checkFilters:function(){this.writeDebug("checkFilters");for(var t in this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(t)&&(this._existingCheckedFilters(t),this._existingSelectedFilters(t),this._existingRadioFilters(t))},checkQueryStringFilters:function(){this.writeDebug("checkQueryStringFilters",arguments);for(var t in I)if(I.hasOwnProperty(t)){var e=this.getQueryString(t);void 0!==e&&""!==e&&-1===I[t].indexOf(e)&&(I[t]=[e])}},getFilterKey:function(t){this.writeDebug("getFilterKey",arguments);for(var e in this.settings.taxonomyFilters)if(this.settings.taxonomyFilters.hasOwnProperty(e))for(var i=0;i<this.settings.taxonomyFilters[e].length;i++)if(this.settings.taxonomyFilters[e]===t)return e},taxonomyFiltersInit:function(){this.writeDebug("taxonomyFiltersInit");for(var t in this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(t)&&(I[t]=[])},taxonomyFiltering:function(){this.writeDebug("taxonomyFiltering");var e=this;e.taxonomyFiltersInit(),e.checkQueryStringFilters(),t("."+this.settings.taxonomyFiltersContainer).on("change."+n,"input, select",function(i){var s,n,a;if(i.stopPropagation(),t(this).is('input[type="checkbox"]')){if(e.checkFilters(),s=t(this).val(),n=t(this).closest(".bh-sl-filters").attr("id"),a=e.getFilterKey(n))if(t(this).prop("checked"))-1===I[a].indexOf(s)&&I[a].push(s),!0===t("#"+e.settings.mapID).hasClass("bh-sl-map-open")&&(m&&f?(e.settings.mapSettings.zoom=0,e.processForm()):e.mapping(F));else{var o=I[a].indexOf(s);o>-1&&(I[a].splice(o,1),!0===t("#"+e.settings.mapID).hasClass("bh-sl-map-open")&&(m&&f?(0===e.countFilters()?e.settings.mapSettings.zoom=d:e.settings.mapSettings.zoom=0,e.processForm()):e.mapping(F)))}}else(t(this).is("select")||t(this).is('input[type="radio"]'))&&(e.checkFilters(),s=t(this).val(),n=t(this).closest(".bh-sl-filters").attr("id"),a=e.getFilterKey(n),s?a&&(I[a]=[s],!0===t("#"+e.settings.mapID).hasClass("bh-sl-map-open")&&(m&&f?(e.settings.mapSettings.zoom=0,e.processForm()):e.mapping(F))):(a&&(I[a]=[]),e.reset(),m&&f?(e.settings.mapSettings.zoom=d,e.processForm()):e.mapping(F)))})},checkVisibleMarkers:function(e,i){this.writeDebug("checkVisibleMarkers",arguments);var s,n=this;t("."+this.settings.locationList+" ul").empty(),t(e).each(function(e,a){i.getBounds().contains(a.getPosition())&&(n.listSetup(a,0,0),s=o(void 0),t("."+n.settings.locationList+" ul").append(s))}),t("."+this.settings.locationList+" ul li:even").css("background",this.settings.listColor1),t("."+this.settings.locationList+" ul li:odd").css("background",this.settings.listColor2)},dragSearch:function(t){this.writeDebug("dragSearch",arguments);var e,i=t.getCenter(),s=this;this.settings.mapSettings.zoom=t.getZoom(),m=F.lat=i.lat(),f=F.lng=i.lng();var n=new this.reverseGoogleGeocode(this);e=new google.maps.LatLng(F.lat,F.lng),n.geocode({latLng:e},function(t){null!==t?(F.origin=p=t.address,s.mapping(F)):s.notify(s.settings.addressErrorAlert)})},emptyResult:function(){this.writeDebug("emptyResult",arguments),t(".bh-sl-pagination-container .bh-sl-pagination").empty(),t(".bh-sl-total-results").text(0);var e,s,n=t("."+this.settings.locationList+" ul"),a=this.settings.mapSettings,o=new google.maps.Map(i.getElementById(this.settings.mapID),a);this.settings.callbackNoResults&&this.settings.callbackNoResults.call(this,o,a),n.empty(),s=t('<li><div class="bh-sl-noresults-title">'+this.settings.noResultsTitle+'</div><br><div class="bh-sl-noresults-desc">'+this.settings.noResultsDesc+"</li>").hide().fadeIn(),n.append(s),e=m&&f?new google.maps.LatLng(m,f):new google.maps.LatLng(0,0),o.setCenter(e),d&&o.setZoom(d)},originMarker:function(t,e,i){if(this.writeDebug("originMarker",arguments),!0===this.settings.originMarker){var s="";void 0!==e&&(s=null!==this.settings.originMarkerImg?null===this.settings.originMarkerDim?this.markerImage(this.settings.originMarkerImg):this.markerImage(this.settings.originMarkerImg,this.settings.originMarkerDim.width,this.settings.originMarkerDim.height):{url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png"},new google.maps.Marker({position:i,map:t,icon:s,draggable:!1}))}},modalWindow:function(){if(this.writeDebug("modalWindow"),!0===this.settings.modal){var e=this;e.settings.callbackModalOpen&&e.settings.callbackModalOpen.call(this),t("."+e.settings.overlay).fadeIn(),t(i).on("click."+n,"."+e.settings.closeIcon+", ."+e.settings.overlay,function(){e.modalClose()}),t(i).on("click."+n,"."+e.settings.modalWindow,function(t){t.stopPropagation()}),t(i).on("keyup."+n,function(t){27===t.keyCode&&e.modalClose()})}},listClick:function(e,s,a,o){this.writeDebug("listClick",arguments);var r=this;t(i).on("click."+n,"."+r.settings.locationList+" li",function(){var i=t(this).data("markerid"),n=S[i];r.settings.callbackListClick&&r.settings.callbackListClick.call(this,i,n),e.panTo(n.getPosition()),e.setZoom(15);!0===r.settings.bounceMarker?(n.setAnimation(null),setTimeout(function(){n.setAnimation(null),r.createInfowindow(n,"left",s,a,o)},700)):r.createInfowindow(n,"left",s,a,o),null!==r.settings.selectedMarkerImg&&r.changeSelectedMarker(n),t("."+r.settings.locationList+" li").removeClass("list-focus"),t("."+r.settings.locationList+" li[data-markerid="+i+"]").addClass("list-focus")}),t(i).on("click."+n,"."+r.settings.locationList+" li a",function(t){t.stopPropagation()})},resultsTotalCount:function(e){this.writeDebug("resultsTotalCount",arguments);var i=t(".bh-sl-total-results");void 0===e||e<=0||0===i.length||i.text(e)},inlineDirections:function(e,s){if(this.writeDebug("inlineDirections",arguments),!0===this.settings.inlineDirections&&void 0!==s){var a=this;t(i).on("click."+n,"."+a.settings.locationList+" li .loc-directions a",function(o){o.preventDefault();var r=t(this).closest("li").attr("data-markerid");a.directionsRequest(s,r,e),t(i).on("click."+n,"."+a.settings.locationList+" .bh-sl-close-icon",function(){a.closeDirections()})})}},visibleMarkersList:function(t,e){if(this.writeDebug("visibleMarkersList",arguments),!0===this.settings.visibleMarkersList){var i=this;google.maps.event.addListenerOnce(t,"idle",function(){i.checkVisibleMarkers(e,t)}),google.maps.event.addListener(t,"center_changed",function(){i.checkVisibleMarkers(e,t)}),google.maps.event.addListener(t,"zoom_changed",function(){i.checkVisibleMarkers(e,t)})}},mapping:function(t){this.writeDebug("mapping",arguments);var e,i,s,n,a,o,r=this;this.isEmptyObject(t)||(e=t.lat,i=t.lng,s=t.geocodeResult,n=t.origin,o=t.page),!0===r.settings.pagination&&(void 0!==o&&g===p||(o=0)),void 0===n&&!0===this.settings.nameSearch?h=r._getData():(a=new google.maps.LatLng(e,i),void 0!==g&&n===g&&void 0!==c?(n=g,h=c):h=r._getData(m,f,n,s)),null!==r.settings.taxonomyFilters&&r.hasEmptyObjectVals(I)&&r.checkFilters(),null!==r.settings.dataRaw?r.processData(t,a,h,o):h.done(function(e){r.processData(t,a,e,o)})},processData:function(s,o,r,l){this.writeDebug("processData",arguments);var p,m,f,b,k,y,w,x,_,F,P,R,O=this,T=0,A={};this.isEmptyObject(s)||(p=s.lat,m=s.lng,f=s.origin,s.name,b=s.distance);var E=t("#"+O.settings.mapID),G="km"===O.settings.lengthUnit?O.settings.kilometersLang:O.settings.milesLang;if(c=h,void 0!==f&&(g=f),O.settings.callbackSuccess&&O.settings.callbackSuccess.call(this),P=E.hasClass("bh-sl-map-open"),!0===O.settings.fullMapStart&&!1===P||!0===O.settings.autoGeocode&&!1===P||!0===O.settings.defaultLoc&&!1===P?D=!0:O.reset(),E.addClass("bh-sl-map-open"),"json"===O.settings.dataType||"jsonp"===O.settings.dataType)for(var z=0;T<r.length;z++){var N=r[z],B={};for(var j in N)N.hasOwnProperty(j)&&(B[j]=N[j]);O.locationsSetup(B,p,m,f,b),T++}else"kml"===O.settings.dataType?t(r).find("Placemark").each(function(){var e={name:t(this).find("name").text(),lat:t(this).find("coordinates").text().split(",")[1],lng:t(this).find("coordinates").text().split(",")[0],description:t(this).find("description").text()};O.locationsSetup(e,p,m,f,b),T++}):t(r).find(O.settings.xmlElement).each(function(){var t={};for(var e in this.attributes)this.attributes.hasOwnProperty(e)&&(t[this.attributes[e].name]=this.attributes[e].value);O.locationsSetup(t,p,m,f,b),T++});if(!0===O.settings.nameSearch&&void 0!==u&&(I[O.settings.nameAttribute]=[u]),null!==O.settings.taxonomyFilters||!0===O.settings.nameSearch){for(var Q in I)if(I.hasOwnProperty(Q)&&I[Q].length>0)for(var q=0;q<I[Q].length;q++)A[Q]||(A[Q]=[]),A[Q][q]="(?=.*\\b"+I[Q][q].replace(/([^\x00-\x7F]|[.*+?^=!:${}()|\[\]\/\\])/g,"")+"\\b)";O.isEmptyObject(A)||(C=t.grep(C,function(t){return O.filterData(t,A)}))}if(void 0!==f&&O.sortNumerically(C),!0===O.settings.featuredLocations&&(L=t.grep(C,function(t){return"true"===t.featured}),M=t.grep(C,function(t){return"true"!==t.featured}),C=[],C=L.concat(M)),O.isEmptyObject(A))if(!0===O.settings.maxDistance&&b)(void 0===C[0]||C[0].distance>b)&&O.notify(O.settings.distanceErrorAlert+b+" "+G);else{if(void 0===C[0])throw new Error("No locations found. Please check the dataLocation setting and path.");-1!==O.settings.distanceAlert&&C[0].distance>O.settings.distanceAlert&&(O.notify(O.settings.distanceErrorAlert+O.settings.distanceAlert+" "+G),F=!0)}if(!0===O.settings.slideMap&&a.slideDown(),O.isEmptyObject(C)||"none"===C[0].result)O.emptyResult();else{if(!0===O.settings.pagination&&O.paginationSetup(l),O.modalWindow(),v=-1===O.settings.storeLimit||C.length<O.settings.storeLimit||!0===this.settings.fullMapStart&&!0===D&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||-1===this.settings.fullMapStartListLimit)?C.length:O.settings.storeLimit,!0===O.settings.pagination?(x=O.settings.locationsPerPage,(w=l*O.settings.locationsPerPage)+x>C.length&&(x=O.settings.locationsPerPage-(w+x-C.length)),C=C.slice(w,w+x),v=C.length):(x=v,w=0),O.resultsTotalCount(C.length),!0===O.settings.fullMapStart&&!0===D||0===O.settings.mapSettings.zoom||void 0===f||!0===F)_=O.settings.mapSettings,y=new google.maps.LatLngBounds;else if(!0===O.settings.pagination){var W=new google.maps.LatLng(C[0].lat,C[0].lng);0===l?(O.settings.mapSettings.center=o,_=O.settings.mapSettings):(O.settings.mapSettings.center=W,_=O.settings.mapSettings)}else O.settings.mapSettings.center=o,_=O.settings.mapSettings;var K=new google.maps.Map(i.getElementById(O.settings.mapID),_);if(google.maps.event.addDomListener(e,"resize",function(){var t=K.getCenter();google.maps.event.trigger(K,"resize"),K.setCenter(t)}),!0===O.settings.dragSearch&&K.addListener("dragend",function(){O.dragSearch(K)}),a.data(O.settings.mapID.replace("#",""),K),O.settings.callbackMapSet&&O.settings.callbackMapSet.call(this,K,o,d,_),"undefined"!=typeof InfoBubble&&null!==O.settings.infoBubble){var V=O.settings.infoBubble;V.map=K,R=new InfoBubble(V)}else R=new google.maps.InfoWindow;O.originMarker(f,o,K),t(i).on("click."+n,".bh-sl-pagination li",function(e){e.preventDefault(),O.paginationChange(t(this).attr("data-page"))}),O.inlineDirections(K,f);for(var U=0;U<=x-1;U++){var Z="";Z=l>0?String.fromCharCode("A".charCodeAt(0)+(w+U)):String.fromCharCode("A".charCodeAt(0)+U);var J=new google.maps.LatLng(C[U].lat,C[U].lng);(k=O.createMarker(J,C[U].name,C[U].address,Z,K,C[U].category,C[U].color,C[U].fontClass,C[U].maker_icon)).set("id",U),S[U]=k,(!0===O.settings.fullMapStart&&!0===D||0===O.settings.mapSettings.zoom||void 0===f||!0===F)&&y.extend(J),O.createInfowindow(k,null,R,w,l)}if((!0===O.settings.fullMapStart&&!0===D||0===O.settings.mapSettings.zoom||void 0===f||!0===F)&&K.fitBounds(y),t("."+O.settings.locationList+" ul").empty(),D&&!1!==O.settings.fullMapStartListLimit&&!isNaN(O.settings.fullMapStartListLimit)&&-1!==O.settings.fullMapStartListLimit)for(var H=0;H<O.settings.fullMapStartListLimit;H++){var X=S[H];O.listSetup(X,w,l)}else t(S).each(function(t){var e=S[t];O.listSetup(e,w,l)});if("undefined"!=typeof MarkerClusterer&&null!==O.settings.markerCluster)new MarkerClusterer(K,S,O.settings.markerCluster);O.listClick(K,R,w,l),t("."+O.settings.locationList+" ul > li:even").css("background",O.settings.listColor1),t("."+O.settings.locationList+" ul > li:odd").css("background",O.settings.listColor2),O.visibleMarkersList(K,S),!0===O.settings.modal&&O.settings.callbackModalReady&&O.settings.callbackModalReady.call(this),O.settings.callbackFilters&&O.settings.callbackFilters.call(this,I)}},writeDebug:function(){e.console&&this.settings.debug&&(Function.prototype.bind?this.writeDebug=Function.prototype.bind.call(console.log,console,"StoreLocator :"):this.writeDebug=function(){arguments[0]="StoreLocator : "+arguments[0],Function.prototype.apply.call(console.log,console,arguments)},this.writeDebug.apply(this,arguments))}}),t.fn[n]=function(e){var i,a=arguments;return e===s||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new R(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var s=t.data(this,"plugin_"+n);s instanceof R&&"function"==typeof s[e]&&(i=s[e].apply(s,Array.prototype.slice.call(a,1))),"destroy"===e&&t.data(this,"plugin_"+n,null)}),i!==s?i:this):void 0}}function R(e,i){a=t(e),this.element=e,this.settings=t.extend({},P,i),this._defaults=P,this._name=n,this.init()}}(jQuery,window,document);